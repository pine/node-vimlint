language: node_js
node_js:
  - '0.10'
  - '0.12'
  - 4
  - 5

script:
  # Test postinstall
  - rm -rf node_modules
  - npm install .
  - npm install

  # Test
  - npm test

  # Test global install
  - npm install . -g
  - vimlint
  - vimlint --help
  - vimlint --version
  - vimlint test/succeeded.vim
  - vimlint test/failed.vim; [ $? != 0 ]

after_success:
  - npm run coverage

env:
  global:
    secure: "bYfP25nebZwoiWjp3SSfYSKyTmNZHThI5P0MVSuFlFW3PyPPC+MmToYrzLZc6qe03We+dhV7FPMfM1QZmhTfBiaB21t7tkTYW7Krpri6nbNm6TNLlIv8/HUfPEwJur4FUph38z0hPlS9rgS8SqljvahGnxfVDhU3znUdm54Nqdg="

notifications:
  slack:
    secure: "FeGD9rqyqw6egfV1bPEW/E+DwZf18cotf6OuonETytKORVfFDya4oVlaKt2z/9VXaBz6t8eTCHum+8LDBAaZLry/upVim1PaCYGjIbV6BtpJkqqz5+1jZWyKeWnecXXI+y1LlpSl9hp8/ErBDTC+TtjocQIzEeXEoKsGhOrUCpU="

sudo: false
